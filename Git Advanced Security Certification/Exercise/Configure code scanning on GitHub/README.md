# ğŸ” Enable CodeQL to Secure Your Source Code

Ensuring the security of application source code is a critical step in modern software development. In this GitHub Skills course, youâ€™ll learn to use **GitHub Code Scanning with CodeQL** to identify, resolve, and prevent insecure coding patterns.

## ğŸ“Œ Step 1: Enable CodeQL

ğŸ‘‹ Hello! Welcome to the GitHub Skills course: **Enable code scanning!**

### What is CodeQL?
[CodeQL](https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/about-code-scanning-with-codeql) is a **static analysis tool** that helps detect security weaknesses such as:

- SQL injection
- Cross-site scripting (XSS)
- Command injection
- Buffer overflows
- And more

### âŒ¨ï¸ Activity: Enable Code Scanning with CodeQL

In this step, you'll enable CodeQL scanning in your repository.

#### Steps:
1. Go to your repository on GitHub.
2. Click on the **Security** tab.
3. Under **Code scanning alerts**, click **Set up code scanning**.
4. Select **CodeQL**.
5. Choose your preferred language(s) or leave it set to **Default**.
6. Click **Start free scan**.

> ğŸ§ª After the scan completes, youâ€™ll see a green checkmark indicating success.

![CodeQL Setup](https://github.com/onyxwizard/skills-introduction-to-codeql/raw/main/images/codeql-setup.png)

You can also explore detailed logs, duration, and artifacts generated by CodeQL under the **Actions** tab.

## ğŸ” Step 2: Review and Triange CodeQL Alerts

Once CodeQL has scanned your codebase, it will generate alerts for potential security issues.

### âŒ¨ï¸ Activity: View All CodeQL Alerts

1. Navigate to the **Security** tab.
2. Click on **Code scanning alerts**.
3. Youâ€™ll see a list of findings grouped by severity and rule ID.

Each alert includes:
- ğŸ› ï¸ Rule ID and description
- ğŸ“ File and line number where the issue was found
- ğŸ’¡ Recommendations for fixing the vulnerability
- ğŸ” Option to view the actual CodeQL query used to detect the issue

Click **Show more** to view full recommendations.

![Recommendations](https://github.com/onyxwizard/skills-introduction-to-codeql/raw/main/images/recommendations.png)

## ğŸ› ï¸ Step 3: Fix Security Vulnerabilities

Now that youâ€™ve reviewed the alerts, itâ€™s time to fix them.

### âŒ¨ï¸ Activity 1: Edit Vulnerable Code

Let's fix a real-world SQL injection vulnerability in the `/server/routes.py` file.

#### Steps:
1. Open the file with the vulnerability.
2. Locate the vulnerable SQL statement.
3. Replace the unsafe code:
   ```python
   "SELECT * FROM books WHERE name LIKE '%" + name + "%'"
   ```
4. Commit the change to a new branch.

## ğŸš« Step 4: Prevent Vulnerabilities in the Pull Request

Letâ€™s simulate introducing a vulnerability again and observe how CodeQL behaves during a pull request.

### âŒ¨ï¸ Activity: Create a New Branch and Trigger Alert

1. Click the **Edit** button on the file.
   ![Edit Button](https://github.com/onyxwizard/skills-introduction-to-codeql/raw/main/images/edit-button.png)
2. Reintroduce the SQL injection vulnerability.
3. Commit changes to a **new branch**.
4. Create a **Pull Request**.

ğŸ” On the Pull Request page, youâ€™ll notice a **Code scanning / CodeQL** check running at the bottom of the PR.

![PR Panel](https://github.com/onyxwizard/skills-introduction-to-codeql/raw/main/images/pr-panel.png)

If a vulnerability is detected, the check will fail â€” preventing insecure code from being merged.

## ğŸ“¥ Step 5: Create a GitHub Issue for an Alert

GitHub Issues are a great way to track and assign work related to security fixes.

### âŒ¨ï¸ Activity: Create a GitHub Issue for an Alert

1. Open one of the open alerts identified by CodeQL.
2. Click the green **Create issue** button at the top right of the alert.
3. Assign the issue to yourself or a team.
4. Add labels like `security`, `high-priority`, etc.

This ensures the vulnerability gets fixed and tracked properly.

## ğŸ¯ Summary

By completing this course, you've learned how to:

âœ… Enable CodeQL scanning in your GitHub repository  
ğŸ” Review and triage security alerts  
ğŸ› ï¸ Fix vulnerabilities in your code  
ğŸš« Prevent future vulnerabilities using pull request checks  
ğŸ“¥ Track fixes using GitHub Issues
